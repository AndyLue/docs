# 数据设计规范

## 数据主键定义

主键类型：Bigint(20)

雪花算法生成

## 数据删除逻辑

实体表：软删除；

关系表：硬删除

## 数据删除标识

is_deleted：0->有效；1->被删除；

## 数据状态标识

业务状态标识status：默认1->有效；0->无效；可根据具体需求进行自定义；

自定义的业务状态标识规定从100开始定义；

## 数据库审计字段

| 字段名称    | 含义     | 数据类型   |
| ----------- | -------- | ---------- |
| create_user | 创建用户 | bigint(20) |
| update_user | 更新用户 | bigint(20) |
| create_time | 创建时间 | datetime   |
| update_time | 更新时间 | datetime   |

## 图片存储逻辑

图片、音频等资源类数据采用OSS方式存储，存储完成后返回**资源路径**进行存储；

### 用户头像存储

字段类型：varchar(255)

## 枚举字典引用

统一采用字典表（as_dict）id值进行枚举字典关联。

避免枚举字典相关的敏感操作（如删除）。

## 用户跨租户逻辑设计

同一用户属于多个租户的情况，默认为多个租户生成该用户数据的副本（需要定义主从关系）。

## 多租户设计

应用管理平台属于多租户系统，采用单库单表的隔离方案，所有实体表都需要增加tenant_code以实现多租户之间的数据隔离。

## 租户类型关系维护

租户类型由枚举字典统一定义。通过as_tenant_attr_role表定义租户类型与角色之间的关联关系。

## 其它

### 考虑国际化

- 手机号码存储方式变更：国际码-号码主体（国际码+"-"+号码主体）；数据类型：varchar（20）

  



## 数据建模指南
## 身份验证



## 免登
### 获取免登授权码
### 获取access_token
### 获取用户详情
#### 请求⽅式：POST（HTTPS）
#### 接口名
#### 请求参数
#### 返回结果
#### 返回参数

## 获取appKey和appSecrt
### 查看应用详情
### 权限管理
#### 申请权限

## 获取应用 access_token
### 请求方式：GET（HTTPS）
### 接口名
### 请求参数
### 返回结果

## 获取免登授权码
### 使用说明
#### 参数说明
#### 返回参数

## 获取用户详情
### 请求⽅式：POST（HTTPS）
### 接口名
### 请求参数
### 返回结果
### 返回参数

